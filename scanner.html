<!DOCTYPE html>
<html>
<head>
    <title>Coupon Validator - Advertiser Portal</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <!-- Using reliable QR code library -->
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
        
        body { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container { 
            background: white; 
            border-radius: 20px; 
            padding: 30px; 
            max-width: 500px; 
            width: 100%; 
            box-shadow: 0 20px 60px rgba(0,0,0,0.3); 
        }
        
        h1 { 
            color: #333; 
            margin-bottom: 10px; 
            text-align: center;
            font-size: clamp(28px, 6vw, 32px);
        }
        
        h2 {
            color: #333;
            margin: 20px 0 10px 0;
            text-align: center;
            font-size: clamp(22px, 5vw, 26px);
        }
        
        p {
            color: #666;
            margin: 10px 0;
            font-size: 16px;
            line-height: 1.6;
            text-align: center;
        }
        
        .scanner-section {
            margin: 25px 0;
            text-align: center;
        }
        
        /* Camera Scanner Styles */
        #cameraView {
            width: 100%;
            max-width: 300px;
            height: 300px;
            margin: 20px auto;
            border: 3px solid #ddd;
            border-radius: 10px;
            overflow: hidden;
            background: #000;
            position: relative;
        }
        
        #cameraView video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        #cameraView canvas {
            display: none;
        }
        
        .scanner-guide {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200px;
            height: 200px;
            border: 2px solid #4CAF50;
            border-radius: 10px;
            pointer-events: none;
        }
        
        .result {
            margin: 20px 0;
            padding: 20px;
            border-radius: 10px;
            text-align: left;
        }
        
        .valid { background: #E8F5E9; border: 2px solid #4CAF50; }
        .invalid { background: #FFEBEE; border: 2px solid #F44336; }
        .used { background: #FFF3E0; border: 2px solid #FF9800; }
        
        .coupon-display {
            font-size: 28px;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            word-break: break-all;
        }
        
        .info-item {
            margin: 12px 0;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
            font-size: 15px;
        }
        
        .btn {
            padding: 14px 24px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px 5px;
            font-size: 16px;
            min-height: 50px;
            flex: 1;
            transition: all 0.3s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .btn-validate { background: #4CAF50; color: white; }
        .btn-validate:hover { background: #45a049; }
        
        .btn-mark-used { background: #2196F3; color: white; }
        .btn-mark-used:hover { background: #1976D2; }
        
        .btn-reset { background: #9E9E9E; color: white; }
        .btn-reset:hover { background: #757575; }
        
        .btn-login { 
            background: #4CAF50; 
            color: white; 
            width: 100%;
            margin-top: 20px;
        }
        
        .btn-login:hover { background: #45a049; }
        
        .btn-logout {
            background: #f44336;
            color: white;
            margin-top: 20px;
        }
        
        .btn-logout:hover {
            background: #d32f2f;
        }
        
        .btn-change-password {
            background: #9C27B0;
            color: white;
            margin-top: 20px;
        }
        
        .btn-change-password:hover {
            background: #7B1FA2;
        }
        
        .btn-start-camera {
            background: #2196F3;
            color: white;
            margin: 10px 0;
        }
        
        .btn-start-camera:hover {
            background: #1976D2;
        }
        
        .btn-stop-camera {
            background: #FF9800;
            color: white;
            margin: 10px 0;
        }
        
        .btn-stop-camera:hover {
            background: #F57C00;
        }
        
        .hidden { display: none; }
        
        .login-section {
            text-align: center;
        }
        
        .advertiser-id-section {
            margin-bottom: 20px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        input[type="text"], 
        input[type="password"] {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        input[type="text"]:focus, 
        input[type="password"]:focus {
            outline: none;
            border-color: #4CAF50;
        }
        
        .error-message {
            color: #f44336;
            margin: 10px 0;
            text-align: center;
            font-size: 15px;
            min-height: 20px;
        }
        
        .success-message {
            color: #4CAF50;
            margin: 10px 0;
            text-align: center;
            font-size: 15px;
            min-height: 20px;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .header-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .scanner-instruction {
            background: #E3F2FD;
            border: 2px solid #2196F3;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
            font-size: 15px;
        }
        
        .advertiser-info {
            background: #E8F5E9;
            border: 2px solid #4CAF50;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
        }
        
        .advertiser-info h3 {
            color: #2E7D32;
            margin-bottom: 10px;
        }
        
        .camera-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 15px 0;
        }
        
        /* Mobile optimizations */
        @media (max-width: 480px) {
            .container {
                padding: 20px;
            }
            
            .action-buttons, .camera-controls, .header-controls {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                margin: 5px 0;
            }
            
            #cameraView {
                max-width: 250px;
                height: 250px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Login Section -->
        <div id="loginSection" class="login-section">
            <h1>üîê Advertiser Scanner</h1>
            <p>Login with your advertiser credentials</p>
            
            <div class="advertiser-id-section">
                <input type="text" 
                       id="advertiserId" 
                       placeholder="Your Advertiser ID (e.g., pharmacy1)"
                       autocomplete="off">
                
                <input type="password" 
                       id="advertiserPassword" 
                       placeholder="Your Password"
                       onkeypress="handleLoginEnter(event)">
                
                <div class="error-message" id="loginError"></div>
                
                <button class="btn btn-login" onclick="login()">
                    üîì Login to Scanner
                </button>
            </div>
            
            <div class="scanner-instruction">
                <p><strong>First time?</strong></p>
                <p>Use any advertiser ID and password (min 6 chars).</p>
                <p>Account will be created automatically.</p>
            </div>
            
            <div class="advertiser-info">
                <h3>üì± How to Use:</h3>
                <p>1. Login with your advertiser credentials</p>
                <p>2. Start camera to scan customer's QR code</p>
                <p>3. Or enter coupon code manually</p>
                <p>4. Validate and mark coupons as used</p>
            </div>
        </div>
        
        <!-- Scanner Section -->
        <div id="scannerSection" class="hidden">
            <h1>üì± Coupon Validator</h1>
            
            <div class="advertiser-info">
                <h3>Logged in as: <span id="loggedInAdvertiser"></span></h3>
                <p>Advertiser ID: <strong><span id="currentAdvertiserId"></span></strong></p>
            </div>
            
            <div class="header-controls">
                <button class="btn btn-change-password" onclick="showChangePasswordModal()">
                    üîë Change Password
                </button>
                <button class="btn btn-logout" onclick="logout()">
                    üö™ Logout
                </button>
            </div>
            
            <div class="scanner-section">
                <h2>Scan Customer QR Code</h2>
                
                <!-- Camera Scanner -->
                <div id="cameraView" class="hidden">
                    <video id="cameraVideo" autoplay playsinline></video>
                    <canvas id="cameraCanvas"></canvas>
                    <div class="scanner-guide"></div>
                </div>
                
                <div class="camera-controls">
                    <button class="btn btn-start-camera" onclick="startCamera()">
                        üì∑ Start Camera
                    </button>
                    <button class="btn btn-stop-camera" onclick="stopCamera()" style="display: none;">
                        ‚èπÔ∏è Stop Camera
                    </button>
                </div>
                
                <p style="margin-top: 20px;">Or enter coupon code manually:</p>
                
                <input type="text" 
                       id="manualCode" 
                       placeholder="Enter coupon code here"
                       onkeypress="handleManualCodeEnter(event)">
                
                <div class="action-buttons">
                    <button class="btn btn-validate" onclick="validateManualCode()">
                        ‚úÖ Validate Code
                    </button>
                    <button class="btn btn-reset" onclick="resetScanner()">
                        üîÑ Reset Scanner
                    </button>
                </div>
            </div>
            
            <!-- Result Display -->
            <div id="resultSection" class="hidden">
                <div class="coupon-display" id="scannedCoupon"></div>
                
                <div id="validResult" class="result hidden">
                    <h2 style="color: #4CAF50;">‚úÖ VALID COUPON</h2>
                    <div class="info-item"><strong>Ad Campaign:</strong> <span id="resultAd"></span></div>
                    <div class="info-item"><strong>Product:</strong> <span id="resultProduct"></span></div>
                    <div class="info-item"><strong>Location Claimed:</strong> <span id="resultLocation"></span></div>
                    <div class="info-item"><strong>Claimed At:</strong> <span id="resultTime"></span></div>
                    <div class="info-item"><strong>Expires:</strong> <span id="resultExpires"></span></div>
                    <div class="info-item"><strong>Customer ID:</strong> <span id="resultCustomer"></span></div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-mark-used" onclick="markCouponUsed()">
                            ‚úÖ Mark as Used
                        </button>
                        <button class="btn btn-reset" onclick="resetScanner()">
                            üîÑ Scan Another
                        </button>
                    </div>
                </div>
                
                <div id="invalidResult" class="result invalid hidden">
                    <h2 style="color: #F44336;">‚ùå INVALID COUPON</h2>
                    <p id="invalidMessage" style="text-align: center; font-size: 16px;"></p>
                    <div class="action-buttons">
                        <button class="btn btn-reset" onclick="resetScanner()">
                            üîÑ Try Again
                        </button>
                    </div>
                </div>
                
                <div id="usedResult" class="result used hidden">
                    <h2 style="color: #FF9800;">‚ö†Ô∏è ALREADY USED</h2>
                    <p style="text-align: center;">This coupon was already redeemed.</p>
                    <div class="info-item"><strong>Used At:</strong> <span id="usedTime"></span></div>
                    <div class="info-item"><strong>Redeemed By:</strong> <span id="redeemedBy"></span></div>
                    <div class="action-buttons">
                        <button class="btn btn-reset" onclick="resetScanner()">
                            üîÑ Scan Another
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // === FIREBASE CONFIG ===
        const firebaseConfig = {
            apiKey: "AIzaSyCxuGBz5FNcaXbCNOfoC9ccR5IsZSYS1d4",
            authDomain: "ad-coupon-system.firebaseapp.com",
            projectId: "ad-coupon-system",
            storageBucket: "ad-coupon-system.firebasestorage.app",
            messagingSenderId: "1030272051491",
            appId: "1:1030272051491:web:4ec6ce21336cf511cac496",
            measurementId: "G-PR9E37ZYE2"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        
        // === GLOBAL VARIABLES ===
        const ADVERTISERS_COLLECTION = 'advertisers';
        let currentAdvertiser = null;
        let currentCouponData = null;
        let cameraStream = null;
        let isScanning = false;
        let scanInterval = null;
        
        // === INITIALIZATION ===
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                // Sign in anonymously to Firebase Auth
                await auth.signInAnonymously();
                console.log("‚úÖ Firebase Auth: Signed in anonymously");
                
                // Check if already logged in from session
                const savedAdvertiser = sessionStorage.getItem('advertiser_logged_in');
                if (savedAdvertiser) {
                    try {
                        currentAdvertiser = JSON.parse(savedAdvertiser);
                        showScannerSection();
                    } catch (e) {
                        sessionStorage.removeItem('advertiser_logged_in');
                    }
                }
                
                // Focus on advertiser ID input
                document.getElementById('advertiserId').focus();
                
            } catch (error) {
                console.error("Auth initialization error:", error);
            }
        });
        
        // === LOGIN FUNCTIONS ===
        async function login() {
            const advertiserId = document.getElementById('advertiserId').value.trim();
            const password = document.getElementById('advertiserPassword').value.trim();
            const errorDiv = document.getElementById('loginError');
            
            errorDiv.textContent = '';
            
            if (!advertiserId || !password) {
                errorDiv.textContent = '‚ùå Please enter ID and password';
                return;
            }
            
            if (password.length < 6) {
                errorDiv.textContent = '‚ùå Password must be at least 6 characters';
                return;
            }
            
            try {
                // Simple test login (works without Firebase)
                if (advertiserId === 'test' && password === 'test123') {
                    currentAdvertiser = {
                        id: 'test',
                        name: 'Test Shop',
                        isTest: true
                    };
                    successLogin();
                    return;
                }
                
                // Try Firebase login
                const advertiserDoc = await db.collection(ADVERTISERS_COLLECTION)
                    .doc(advertiserId.toLowerCase())
                    .get();
                
                if (!advertiserDoc.exists) {
                    // Create new advertiser
                    await db.collection(ADVERTISERS_COLLECTION)
                        .doc(advertiserId.toLowerCase())
                        .set({
                            id: advertiserId.toLowerCase(),
                            name: advertiserId,
                            password: password,
                            createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                            couponValidations: 0
                        });
                    
                    currentAdvertiser = {
                        id: advertiserId.toLowerCase(),
                        name: advertiserId,
                        isNew: true
                    };
                } else {
                    const advertiserData = advertiserDoc.data();
                    
                    if (advertiserData.password !== password) {
                        errorDiv.textContent = '‚ùå Incorrect password';
                        return;
                    }
                    
                    currentAdvertiser = {
                        id: advertiserId.toLowerCase(),
                        name: advertiserData.name || advertiserId,
                        couponValidations: advertiserData.couponValidations || 0
                    };
                }
                
                successLogin();
                
            } catch (error) {
                console.error('Login error:', error);
                errorDiv.textContent = '‚ùå Login error: ' + error.message;
                
                // Fallback to test login
                currentAdvertiser = {
                    id: 'test_fallback',
                    name: 'Test Mode',
                    isTest: true
                };
                successLogin();
            }
        }
        
        function successLogin() {
            sessionStorage.setItem('advertiser_logged_in', JSON.stringify(currentAdvertiser));
            document.getElementById('advertiserId').value = '';
            document.getElementById('advertiserPassword').value = '';
            showScannerSection();
        }
        
        function handleLoginEnter(event) {
            if (event.key === 'Enter') login();
        }
        
        function showScannerSection() {
            document.getElementById('loginSection').classList.add('hidden');
            document.getElementById('scannerSection').classList.remove('hidden');
            
            document.getElementById('loggedInAdvertiser').textContent = currentAdvertiser.name;
            document.getElementById('currentAdvertiserId').textContent = currentAdvertiser.id;
            
            // Stop any existing camera
            stopCamera();
        }
        
        function logout() {
            stopCamera();
            sessionStorage.removeItem('advertiser_logged_in');
            currentAdvertiser = null;
            currentCouponData = null;
            
            document.getElementById('scannerSection').classList.add('hidden');
            document.getElementById('loginSection').classList.remove('hidden');
            document.getElementById('advertiserId').focus();
        }
        
        // === CAMERA SCANNER FUNCTIONS ===
        async function startCamera() {
            try {
                const video = document.getElementById('cameraVideo');
                const cameraView = document.getElementById('cameraView');
                
                // Request camera access
                cameraStream = await navigator.mediaDevices.getUserMedia({
                    video: {
                        facingMode: 'environment',
                        width: { ideal: 1280 },
                        height: { ideal: 720 }
                    },
                    audio: false
                });
                
                video.srcObject = cameraStream;
                cameraView.classList.remove('hidden');
                
                // Show/hide buttons
                document.querySelector('.btn-start-camera').style.display = 'none';
                document.querySelector('.btn-stop-camera').style.display = 'block';
                
                // Start scanning for QR codes
                startQRScanning();
                
            } catch (error) {
                console.error('Camera error:', error);
                alert('‚ùå Camera access denied. Please allow camera permissions.');
            }
        }
        
        function stopCamera() {
            if (cameraStream) {
                cameraStream.getTracks().forEach(track => track.stop());
                cameraStream = null;
            }
            
            isScanning = false;
            if (scanInterval) clearInterval(scanInterval);
            
            document.getElementById('cameraView').classList.add('hidden');
            document.querySelector('.btn-start-camera').style.display = 'block';
            document.querySelector('.btn-stop-camera').style.display = 'none';
        }
        
        function startQRScanning() {
            const video = document.getElementById('cameraVideo');
            const canvas = document.getElementById('cameraCanvas');
            const context = canvas.getContext('2d');
            
            isScanning = true;
            
            function scanFrame() {
                if (!isScanning || !video.videoWidth) return;
                
                // Set canvas dimensions to match video
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                
                // Draw video frame to canvas
                context.drawImage(video, 0, 0, canvas.width, canvas.height);
                
                // Get image data for QR scanning
                const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
                
                try {
                    // Use jsQR to detect QR code
                    const code = jsQR(imageData.data, imageData.width, imageData.height, {
                        inversionAttempts: 'dontInvert',
                    });
                    
                    if (code) {
                        // QR code found!
                        stopCamera();
                        validateCoupon(code.data);
                    }
                } catch (error) {
                    console.debug("Scan error:", error);
                }
                
                // Continue scanning
                if (isScanning) {
                    requestAnimationFrame(scanFrame);
                }
            }
            
            // Start scanning loop
            scanFrame();
        }
        
        // === COUPON VALIDATION ===
        function handleManualCodeEnter(event) {
            if (event.key === 'Enter') validateManualCode();
        }
        
        function validateManualCode() {
            const code = document.getElementById('manualCode').value.trim();
            if (code) {
                validateCoupon(code);
            } else {
                alert("Please enter a coupon code");
            }
        }
        
        async function validateCoupon(couponCode) {
            try {
                // Show loading
                document.getElementById('resultSection').classList.remove('hidden');
                document.getElementById('validResult').classList.add('hidden');
                document.getElementById('invalidResult').classList.add('hidden');
                document.getElementById('usedResult').classList.add('hidden');
                
                document.getElementById('scannedCoupon').textContent = couponCode;
                
                // For test mode
                if (currentAdvertiser?.isTest) {
                    // Simulate validation
                    setTimeout(() => {
                        currentCouponData = {
                            couponCode: couponCode,
                            adName: 'Test Ad',
                            productName: 'Test Product',
                            hostName: 'Test Location',
                            claimedAt: { toDate: () => new Date() },
                            expiresAt: new Date(Date.now() + 24*60*60*1000),
                            userId: 'test_user_123',
                            redeemed: false
                        };
                        showValidResult();
                    }, 500);
                    return;
                }
                
                // Real Firebase validation
                const querySnapshot = await db.collection('claims')
                    .where('couponCode', '==', couponCode)
                    .limit(1)
                    .get();
                
                if (querySnapshot.empty) {
                    showInvalidResult("Coupon not found");
                    return;
                }
                
                const doc = querySnapshot.docs[0];
                currentCouponData = {
                    id: doc.id,
                    ...doc.data()
                };
                
                // Check expiration
                const expiresTime = currentCouponData.expiresAt?.toDate();
                if (expiresTime && expiresTime < new Date()) {
                    showInvalidResult("Coupon has expired");
                    return;
                }
                
                // Check if already redeemed
                if (currentCouponData.redeemed) {
                    showUsedResult();
                    return;
                }
                
                showValidResult();
                
            } catch (error) {
                console.error("Validation error:", error);
                showInvalidResult("Error: " + error.message);
            }
        }
        
        function showValidResult() {
            document.getElementById('validResult').classList.remove('hidden');
            document.getElementById('invalidResult').classList.add('hidden');
            document.getElementById('usedResult').classList.add('hidden');
            
            const claimedTime = currentCouponData.claimedAt?.toDate();
            const expiresTime = currentCouponData.expiresAt?.toDate();
            
            document.getElementById('resultAd').textContent = currentCouponData.adName || 'Unknown';
            document.getElementById('resultProduct').textContent = currentCouponData.productName || 'Unknown';
            document.getElementById('resultLocation').textContent = currentCouponData.hostName || 'Unknown';
            document.getElementById('resultTime').textContent = claimedTime ? claimedTime.toLocaleString() : 'Now';
            document.getElementById('resultExpires').textContent = expiresTime ? expiresTime.toLocaleString() : '24 hours';
            document.getElementById('resultCustomer').textContent = (currentCouponData.userId || 'user').substring(0, 8) + '...';
        }
        
        function showInvalidResult(message) {
            document.getElementById('validResult').classList.add('hidden');
            document.getElementById('invalidResult').classList.remove('hidden');
            document.getElementById('usedResult').classList.add('hidden');
            document.getElementById('invalidMessage').textContent = message;
        }
        
        function showUsedResult() {
            document.getElementById('validResult').classList.add('hidden');
            document.getElementById('invalidResult').classList.add('hidden');
            document.getElementById('usedResult').classList.remove('hidden');
            
            const redeemedTime = currentCouponData.redeemedAt?.toDate();
            document.getElementById('usedTime').textContent = redeemedTime ? redeemedTime.toLocaleString() : 'Previously';
            document.getElementById('redeemedBy').textContent = currentCouponData.redeemedBy || 'Another advertiser';
        }
        
        async function markCouponUsed() {
            try {
                // For test mode
                if (currentAdvertiser?.isTest) {
                    alert('‚úÖ Test coupon marked as used!');
                    showUsedResult();
                    setTimeout(resetScanner, 2000);
                    return;
                }
                
                // Real Firebase update
                await db.collection('claims').doc(currentCouponData.id).update({
                    redeemed: true,
                    redeemedAt: firebase.firestore.FieldValue.serverTimestamp(),
                    redeemedBy: currentAdvertiser.id,
                    redeemedByName: currentAdvertiser.name
                });
                
                // Update advertiser stats
                await db.collection(ADVERTISERS_COLLECTION)
                    .doc(currentAdvertiser.id)
                    .update({
                        couponValidations: firebase.firestore.FieldValue.increment(1),
                        lastValidation: firebase.firestore.FieldValue.serverTimestamp()
                    });
                
                // Update UI
                showUsedResult();
                document.getElementById('redeemedBy').textContent = currentAdvertiser.name;
                
                setTimeout(resetScanner, 3000);
                
            } catch (error) {
                alert('‚ùå Error: ' + error.message);
            }
        }
        
        function resetScanner() {
            stopCamera();
            currentCouponData = null;
            document.getElementById('resultSection').classList.add('hidden');
            document.getElementById('manualCode').value = '';
            document.getElementById('manualCode').focus();
        }
        
        // Simple password modal functions (optional)
        function showChangePasswordModal() {
            alert('Password change not implemented in demo. Create new account instead.');
        }
        
        function closePasswordModal() {
            // Not implemented
        }
        
        function changePassword() {
            // Not implemented
        }
        
        function handlePasswordModalEnter(event) {
            // Not implemented
        }
    </script>
</body>
</html>